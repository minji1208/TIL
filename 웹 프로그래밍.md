# 웹 프로그래밍

- 데이터가 실시간으로 변화하는 것을 처리하거나 저장하기에 불가능
- 동적으로 변화하는 데이터를 처리하고 표시하기 위해 개발된 언어 - CGI, ASP, PHP, JSP
- 웹 프로그래밍은 기본적으로 클라이언트(Client)/서버(Server) 방식

## 클라이언트/서버 구조
웹 브라우저가 있는 클라이언트가 자료를 요청하면, 웹 서버가 있는 서버는 요청에 응답함

### 웹 서버의 역할
- 웹의 HTTL를 사용하여 클라이언트의 요청에 응답하는 프로그램
- 서버의 역할을 수행하기 위해 항상 실행되어 있어야 하고, 클라이언트가 요청한 페이지 또는 프로그램을 실행하여 파일이나 그 결과를 사용자들에게 제공함

### 정적 웹 서비스
특정 폴더에 HTML이나 다양한 미디어의 자원 파일을 저장한 후 클라이언트의 요청에 그대로 파일을 서비스하는 방법
### 동적 웹 서비스
같은 요청이라도 클라이언트에 따라 다른 결과의 서비스를 해주는 방법

## URL(Uniform Resource Locator)
웹 어플리케이션에 요청을 구분하기 위한 용도로 사용
인터넷에 있는 자원의 위치를 나타내기 위한 규약
### 구성
```
[프로토콜]://[호스트][:포트][경로][파일명][.확장자][쿼리문자열]
```

## CGI(Common Gateway Interface)
웹 서버와 동적 컨텐츠 생성을 맡은 프로그램 사이에서 정보를 주고받는 인터페이스

- 개발 언어 : UNIX 플랫폼 - 펄, Windows 플랫폼 - 비주얼 베이직, C/C++
하나의 요청에 대해 1개의 프로세스가 생성이 되어도 그 요청을 처리한 뒤 종료

- 서버의 자원을 과도하게 사용하는 문제점 때문에 UNIX 플랫폼 이외에는 거의 사용되지 않음

## 어플리케이션 서버 방식
여러 명의 사용자가 동일한 페이지를 요청하여 같은 애플리케이션 프로그램을 처리할 때 1개의 프로세스만을 할당하고, 사용자의 요청을 쓰레드(Thread) 방식으로 처리

메모리 사용량 및 프로세스 관리 부하 감소로 전체적인 처리량 높음

## PHP
C언어와 유사한 문법을 사용하며, 적은 명령어로 서버 프로그래밍이 가능한 서버 프로그래밍 방식

오픈 소스 프로젝트로 다양한 운영체제와 웹서버를 지원한다.

## Servlet
자바를 사용하여 웹 페이지를 동적으로 생성하는 서버 측 프로그램
- 서버에서 실행되면서 클라잉언트 요청을 수락하고 그 요청에 맞는 동적 응답을 생성하는 자바 프로그램
- 자바 프로그램에 표현 부분인 HTML 코드를 모두 포함해야 하므로 로직 처리와 디자인 처리를 분리하기 어려움

## JSP(JavaServer Pages)
Sun이 개발(썬마이크로시스템즈사가 개발한 인터넷 서버프로그래밍)

HTML 태그 내에 자바 소스 코드를 삽입하고 컴파일시켜 서블릿으로 변환하는 방식

자바 기반의 문법을 이용하여 어려운 자바 소스 대신에 태그를 사용해 자바 객체 사용

### 특징
- 플랫폼에 독립적인 기술 방식
- 웹 서버에 독립적임

### JSP 엔진
하나의 Servlet 프로그램으로 변환

웹 서버에서 JSP를 실행시키려면 자바 모듈을 이해하는 엔진인 자바엔진이 있어야 함

**종류**
1. 톰캣(Tomcat)
2. JEUS
3. WebLogic
4. 레진(resin)
5. Jrun

**주요 메서드**
- _jspInit() : 요구되는 자원의 연결 등의 초기화 작업을 수행
- _jspService() : 실제 클라이언트의 요청에 대한 작업 처리 수행
- _jspDestory() : 서블릿 종료를 위해 사용

## 웹 애플리케이션
웹을 기반으로 실행되는 프로그램

웹 프로그래밍을 통해 구현

### 웹 애플리케이션의 구성 요소
- 웹 브라우저 - 클라이언트이며, 사용자의 작업 창
- 웹 서버 - 웹 브라우저의 요청을 받아들이는 곳
- 웹 애플리케이션 서버(WAS) - 요청된 페이지의 로직 및 데이터베이스와의 연동을 처리하는 부분
- 데이터베이스 - 데이터의 저장소

## AJAX(Asynchronous Javascript, XML)
서버와 데이터를 교환하는 기술

javascript로 원격지로부터 데이터를 읽어오는데 필요한 처리 기술들의 집합체

- XMLHttpRequest 객체를 사용하여 서버로부터 데이터를 가져오고, 그 내용을 페이지에 반영해 주기 위해 HTML 태그 요소를 제어하는 DOM 객체에 대한 처리 및 CSS 처리의 병행을 보여줌
- AJAX가 적용된 페이지는 XML이나 JSON 형식으로 구성된 새로운 내용만을 XMLHttpRequest(서버와의 통신 담당) 객체를 통해 받아오기 때문에 페이지 이동 없이 새로운 내용을 사용자에게 제공할 수 있음

- TEXT, HTML, XML, JSON 형식으로 작성된 문서 데이터를 HTTP 프로토콜을 통해 서버에 요청할 수 있음
- 구글 맵이나 유튜브 서비스와 같이 웹 페이지의 특정 영역에만 필요한 내용을 갱신할 수 있음

### jQuery를 이용한 AJAX

- url : 접속할 페이지 주소
- type : "get/post"
- data : 파라미터 문자열
- dataType : "text/xml/json"
- timeout : 밀리세컨드단위 제한시간
- cache : 이전 요청에 대한 캐쉬 저장 여부
- success : functon(data){
    // 통신이 성공했을때 실행되는 함수
}
- error : function(xhr, textStatus, errorThrown){
    // 통신이 실패했을 때 실행되는 함수
}

### XMLHttpRequest 객체
서버측 javascript와 통신하기 위한 AJAX 핵심 기술

- 페이지 일부분을 업데이트 하기 위한 정보를 서버에 요청할 수 있음
- 서버로부터 받은 데이터로 작업


## 서블릿
서버쪽에서 실행되면서 클라이언트의 요청에 따라 동적으로 서비스를 제공하는 자바 클래스

## 서블릿 특징
- 서버 쪽에서 실행되면서 기능을 수행함
- 기존의 정적인 웹 프로그램의 문제점을 보완하여 동적인 여러 가지 기능을 제공함
- 스레드 방식으로 실행됨
- 자바로 만들어져 자바의 특징(객체 지향)을 가짐
- 자바기반의 웹 컴포넌트로서 java 확장자를 갖는다
- 컨테이너에서 실행됨
- 컨테이너 종류에 상관없이 실행됨(플랫폼 독립적)
- 보안 기능을 적용하기 쉬움
- 웹 브라우저에서 요청 시 기능 수행
- 클라이언트는 브라우저를 이용한 URL 지정을 통해 서블릿에 요청 가능
- 서블릿의 응답 결과는 일반적으로 HTML 형식으로 서비스됨
(자바 코드를 이용해서 클라이언트에 HTML 코드로 전송하는 추가 작업 필요)
- MVC 패턴의 Controller 역할로서 서블릿이 사용됨

### 서블릿 클래스 간의 관계
서블릿을 구현할 때 반드시 상속받아야 하는 클래스가 java.servlet.http.HttpServlet 클래스이다.

### 인터페이스 및 클래스
- Servlet 인터페이스
서블릿 프로그램을 개발할 때 반드시 구현해야 하는 메서드를 선언하고 있는 인터페이스
-init(), service(), destroy()
- GenericServlet 클래스
Servlet 인터페이스를 구현하여 클라이언트-서버환경에서 서버 단의 애플리케이션으로서 필요한 기능을 구현한 추상 클래스, service() 메서드를 제외한 모든 메서드를 정의하여 적절한 기능으로 구현
- HttpServlet 클래스
GenericServlet 클래스를 상속하여 service() 메서드를 재정의함으로써 HTTP 프로토콜에 알맞은 동작을 수행하도록 구현한 클래스 

### 웹 컴포넌트
- 동적 콘텐츠를 생성하는 웹 애플리케이션
- 웹 서버에서 수행되는 자원들

**서블릿의 생명주기** : 웹 컴포넌트를 저장하는 저장소 역할, 메모리 로딩, 객체 생성 및 초기화 등

### 컨테이너 
서블릿의 생명주기를 관리하고 서블릿으로 변환하는 기능을 수행하는 프로그램

### 서블릿 컨테이너
클라이언트의 요청에 따라 서블릿을 수행하는 프로그램
- 자바 수행 환경
- 웹 서버
- 서블릿 컨테이너


### JSP 컨테이너
JSP를 서블릿으로 변환하는 프로그램
- 자바 수행환경
- 웹서버
- 서블릿 컨테이너
- JSP 컨테이너

### 콜백 메서드 
어떤 객체에서 어떤 상황이 발생하면 컨테이너가 자동으로 호출하여 실행하는 메서드
- init()
: 클라이언트로부터 최초로 서블릿 요청이 있을 때 실행
- service()
: 클라이언트로부터 요청이 있을 때마다 실행
- destroy()
: 서블릿 객체가 메모리에서 삭제될 때 실행
(서비스나 서버 중지 시)

### HTTP 규칙
- 요청 규칙
: 웹 브라우저가 웹 서버에 HTML과 같은 데이터를 요청할 때 사용할 데이터 구성 규칙
- 응답 규칙
: 웹 서버가 웹 브라우저에 HTML과 같은 데이터를 전송할 때 사용할 데이터 구성 규칙

### 응답 처리를 위한 코드
```
PrintWriter out = response.getWriter();
```

### get 방식
1. 브라우저에 직접적으로 url 입력
2. a 태그로 정의
3. form method='get'으로 정의

### post 방식
1. form method='post'로 정의

## 포워드 방식
1. **redirect 방식**
    - HttpServletResponse 객체의 sendRedirect() 메서드 이용
    - 웹 브라우저에 재요청하는 방식
    - 형식 : response.sendRedirect("포워드할 서블릿 또는 JSP");
2. Refresh 방법
    - HttpServletResponse 객체의 addHeader() 메서드 이용
    - 웹 브라우저에 재요청하는 방식
    - 형식 : response.addHeader("Refresh", 경과시간(초));
3. location 방식
    - 자바스크립트 location 객체의 href 속성 이용
    - 형식 : location.href="요청할 서블릿 또는 JSP";
4. **RequestDispatcher 방법**
    - 일반적으로 포워딩 기능 지칭
    - *서블릿이 직접 요청하는 방법*
    - RequestDispatcher 클래스의 forward() 메서드를 이용
    - 형식 : RequestDispatcher dis = request.getRequestDispatcher("포워드할 서블릿 또는 JSP");
    
        dis.forsard(request, response);
```
redirect, Refresh, location 방법은 서블릿이 웹 브라우저를 거쳐 다른 서블릿이나 JSP에게 요청하는 방법

RequestDispatcher 방법은 서블릿에서 클라이언트를 거치지 않고 바로 다른 서블릿에게 요청하는 방법
```

#### dispatch를 이용한 포워딩
클라이언트의 브라우저를 거치지 않고 서버에서 포워딩 진행
1. 클라이언트의 웹 브라우저에서 첫 번째 서블릿에 요청
2. 첫 번째 서블릿은 RequestDispatcher를 이용해 두 번째 서블릿으로 포워드