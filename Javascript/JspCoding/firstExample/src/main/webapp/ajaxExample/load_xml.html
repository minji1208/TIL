<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
		
		<link rel="shortcut icon" href="../image/icon.png" />
		<link rel="apple-touch-icon" href="../image/icon.png" />
		
		<!--[if lt IE 9]>
		<script src="../js/html5shiv.js"></script>
		<![endif]-->
		
		<title>Insert title here</title>
		
		<link rel="stylesheet" type="text/css" href="../css/reset.css">
		<link rel="stylesheet" type="text/css" href="../css/common.css">
		
		<script type="text/javascript" src="../js/jquery-3.6.2.min.js"></script>
		
		<script type="text/javascript">
			$(function(){
// 				$("#mybtn").click(function(){
// 					$.ajax({
// 						url:"/firstExample/ajax/xml/book.xml",
// 						type: "get",
// 						dataType : "xml",
// 						cache: false,
// 						timeout: 30000,
// 						success: function(data){
// 							$(data).find("info").each(function(){								
// 								let title = $(this).find("title").text();
// 								let writer = $(this).find("writer").text();
// 								let price = $(this).find("price").text();
								
// 								let div = $("<div>");
// 								let p1 = $("<p>").html(title);
// 								let p2 = $("<p>").html(writer);
// 								let p3 = $("<p>").html(price);
								
// 								div.append(p1).append(p2).append(p3);
								
// 								$("#result").append(div);
// 								$("#result").append("<hr>");
// 							});
// 						},
// 						error: function(xhr, testStatus, errorThrown){
							
// 							$("#result").html(testStatus+" (HTTP-"+xhr.status+" / "+errorThrown+")");
// 						}
// 					})

// 				});
				/* get() 함수로 접근
				$.get(요청할 rul, 요청시 전달할 파라미터, 콜백함수)<- 정상적으로 호출 시 호출함수, fail(콜백함수)<- 실패시 호출 함수
				같은 서버에 위치하고 잇는 데이터를 요청하기 때문에 ../ajax/xml/book.xml 가능합ㄴ디ㅏ.
				하지만 다른 위치에 접근시 경로가 달라져야 하기 때문에 url 요청을 권장합니다.
				 */
					$.get('../ajax/xml/book.xml', function(data) {
						$(data).find('book').each(function(){
							let title = $(this).find("title").text();
							let writer = $(this).find("writer").text();
							let price = $(this).find("price").text();
							
							let txt = $("<li>").html(title+", "+writer+", "+price);
							$("#view").append(txt);
						});
					}).fail(function(xhr, status, error){
						$("#result").html("오류가 발생했씁니다.<br>").append("오류명: "+error+"<br>").append("상태: "+status);
					});	
			});
		</script>
	</head>
	<body>
		<h1 class="title">책정보 출력하기</h1>
		<div class="exec">
			<input type="button" value="book.xml 가져오기" id="mybtn">
		</div>
		<div class="console" id="result">
			<ul id="view"></ul>
		</div>
	</body>
</html>