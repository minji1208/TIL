# 데이터 입출력 구현
p.152

## 데이터베이스 개요
### 데이터베이스
: 공동으로 사용될 데이터를 중복을 배제하여 통합하고, 저장장치에 저장하여 항상 사용할 수 있도록 운영하는 운영 데이터

- 통합된 데이터(Integrated Data) : 자료의 중복을 배제한 데이터의 모임
- 저장된 데이터(Stored Data) : 컴퓨터가 접근할 수 있는 저장 매체에 저장된 자료
- 운영 데이터(Operational Data) : 조직의 고유한 업무를 수행하는데 반드시 필요한 자료
- 공용 데이터(Shared Data) : 여러 응용 시스템들이 공동으로 소유하고 유지하는 자료
  
### DBMS(DataBase Management System; 데이터베이스 관리 시스템)
: 사용자의 요구에 따라 정보를 생성해주고, 데이터베이스를 관리해주는 소프트웨어
- DDL(데이터 정의어) : 데이터의 형과 구조에 대한 정의, 이용 방식, 제약 조건 등을 명시하는 언어
- DML(데이터 조작어) : 데이터 검색, 갱신, 삽입, 삭제 등을 위해 인터페이스 수단을 제공하는 언어
- DCL(데이터 제어어) : 데이터의 무결성, 보안, 권한 검사, 병행 제어를 제공하는 기능

### 데이터의 독립석
- 논리적 독립성 : 응용 프로그램과 데이터베이스를 독립시킴으로써, 데이터의 논리적 구조를 변경시키더라도 응용 프로그램은 영향을 받지 않음
- 물리적 독립성 : 물리적 장치를 독립시킴으로써, 디스크를 추가/변경하더라도 응용 프로그램은 영향을 받지 않음

### 스키마(Schema)
: 데이터베이스의 구조와 제약조건에 관한 전반적인 명세를 기술한 것
- 외부 스키마 : 각 개인의 입장에서 필요로 하는 데이터베이스의 논리적 구조를 정의한 것
- 개념 스키마 : 데이터베이스의 전체적인 논리적 구조
- 내부 스키마 : 물리적 저장장치의 입장에서 본 데이터베이스 구조

### 데이터베이스 설계 시 고려사항
- 무결성 : 삽입, 삭제, 갱신 등의 연산 후에도 데이터베이스에 저장된 데이터가 정해진 제약 조건을 항상 만족해야 함
- 일관성 : 데이터베이스에 저장된 데이터들 사이나, 특정 질의에 대한 응답이 처음부터 끝까지 변함없이 일정해야 함
- 회복 : 시스템에 장애가 발생했을 때 장애 발생 직전의 상태로 복구할 수 있어야 함
- 보안 : 불법적인 데이터의 노출 또는 변경이나 손실로부터 보호할 수 있어야 함
- 효율성 : 응답시간의 단축, 시스템의 생산성, 저장 공간의 최적화 등이 가능해야 함
- 데이터베이스 확장 : 데이터베이스 운영에 영향을 주지 않으면서 지속적으로 데이터를 추가할 수 있어야 함

### 데이터베이스 설계 순서
```
요구 조건 분석 -> 개념적 설계 -> 논리적 설계 -> 물리적 설계 -> 구현

- 요구 조건 분석 : 필요한 용도를 파악하는 것
- 개념적 설계 : 현실 세계에 대한 인식을 추상적 개념으로 표현하는 것
- 논리적 설계 : 현실 세계에서 발생하는 자료를 특정 DBMS가 지원하는 논리적 자료 구조로 변환시키는 과정
- 물리적 설계 : 논리적 구조로 표현된 데이터를 물리적 구조의 데이터로 변환하는 과정
- 구현 : 논리적 설계와 물리적 설계에서 도출된 데이터베이스 스키마를 파일로 생성하는 과정
```

## 데이터 모델
: 현실 세계의 정보들을 체계적으로 표현한 개념적 모형

- 데이터 모델 구성 요소 : 개체, 속성, 관계
- 데이터 모델 종류 : 개념적 데이터 모델, 논리적 데이터 모델, 물리적 데이터 모델
- 데이터 모델에 표시할 요소 : 구조, 연산, 제약 조건

### 개념적 데이터 모델 
: 현실 세계에 대한 인간의 이해를 돕기 위해 현실 세계에 대한 인식을 추상적 개념으로 표현하는 과정  
대표적인 개념적 데이터 모델 : E-R 모델

### 논리적 데이터 모델
: 개념적 구조를 컴퓨터 세계의 환경에 맞도록 변환하는 과정  

### 데이터 모델 구성 요소
- 개체(Entity) : 데이터베이스에 표현하려는 것으로, 개념이나 정보 단위 같은 현실 세계의 대상체
- 속성(Attribute) : 데이터베이스를 구성하는 가장 작은 논리적 단위
- 관계(Relationship) : 개체와 개체 사이의 논리적인 연결  
    관계의 종류 : 종속 관계, 중복 관계, 재귀 관계, 배타 관계

### 데이터 모델에 표시할 요소
- 구조(Structure) : 논리적으로 표현된 개체 타입들 간의 관계로서 데이터 구조 및 정적 성질 표현
- 연산(Operation) : 데이터베이스에 저장된 실제 데이터를 처리하는 작업에 대한 명세로서 데이터베이스를 조작하는 기본 도구
- 제약 조건(Constraint) : 데이터베이스에 저장될 수 있는 실제 데이터의 논리적인 제약 조건

## E-R(개체-관계) 모델
: 개체와 개체 간의 관계를 기본 요소로 이용하여 현실 세계의 무질서한 데이터를 개념적인 논리 데이터로 표현하기 위한 방법  
개념적 데이터 모델의 가장 대표적인 것  
```
사각형 : 개체 타입
마름모 : 관계 타입
타원 : 속성
이중 타원 : 다중값 속성
밑줄 타원 : 기본키 속성
선 : 개체 타입과 속성을 연결
```

## 관계형 데이터베이스
: 2차원적인 표를 이용해서 데이터 상호 관계를 정의하는 데이터베이스
-  튜플(Tuple) : 릴레이션을 구성하는 각각의 행, 튜플의 수 - 카디널리티(Cardinality)  
- 속성(Attribute) : 데이터베이스를 구성하는 가작 작은 논리적 단위, 속성의 수 - 디그리/차수
- 도메인(Domain) : 하나의 애트리뷰트가 취할 수 있는 같은 타입의 원자값들의 집합

### 릴레이션의 특징
- 릴레이션에는 똑같은 튜플이 포함될 수 없음  
- 튜플 사이에는 순서가 없음
- 속성의 값은 논리적으로 더 이상 쪼갤 수 없는 원자값만을 저장

### 관계형 데이터 모델(Relational Data Model)
: 2차원적인 표를 이용해서 데이터 상호 관계를 정의하는 DB 구조

### 키(Key)
: 데이터베이스에서 조건에 만족하는 튜플을 찾거나 순서대로 정렬할 때 기준이 되는 속성
```
키의 종류
- 후보키 : 속성들 중에서 튜플을 유일하게 식별하기 위해 사용되는 속성들의 부분집합, 유일성과 최소성을 모두 만족
- 기본키 : 후보키 중에서 특별히 선정된 주키, 중복된 값을 가질 수 없음
- 대체키 : 후보키가 둘 이상일 때 기본키를 제외한 나머지 후보키
- 슈퍼키 : 속성들의 집합으로 구성된 키, 유일성 만족
- 외래키 : 다른 릴레이션의 기본키를 참조하는 속성 또는 속성들의 집합
```

### 무결성(Integrity)
: 데이터베이스에 저장된 데이터 값과 현실 세계의 실제값이 일치하는 정확성
```
- 개체 무결성 : 기본키를 구성하는 어떤 속성도 Null 값이나 중복값을 가질 수 없다는 규정
- 참조 무결성 : 외래키 값은 Null이거나 참조할 수 없는 외래키 값을 가질 수 없다는 규정
- 도메인 무결성 : 정의된 도메인에 속한 값이어야 한다는 규정
- NULL 무결성 : 특정 속성 값이 NULL이 될 수 없도록 하는 규정
- 고유 무결성 : 각 튜플이 갖는 속성값들이 서로 달라야 한다는 규정
```
  
#

## 관계 대수 및 관계 해석
### 관계 대수
: 원하는 정보와 그 정보를 검색하기 위해서 어떻게 유도하는가를 기술하는 절차적인 언어

### 순수 관계 연산자
- Select : 산텍 조건에 만족하는 튜플의 부분집합을 구하여 새로운 릴레이션을 만드는 연산, ∂(시그마)
- Project : 속성 리스트에 제ㅔ시된 속성 값만을 추출하여 새로운 릴레이션을 만드는 연산, π(파이)
- Join : 공통 속성을 중심으로 두 개의 릴레이션을 하나로 합쳐서 새로운 릴레이션을 만드는 연산
- Division : R의 속성이 S의 속성값을 모두 가진 튜플에서 S가 가진 속성을 제외한 속성만을 구하는 연산, ÷

### 일반 집합 연산자
: 수학적 집합 이론에서 사용하는 연산자  
합집합, 교집합, 차집합, 교차곱

### 관계해석
: 관계 데이터의 연산을 표현하는 방법
  
#

## 이상(Anomaly)
: 테이블에서 데이터의 중복이 발생하고, 이 중복(Redundancy)으로 문제가 발생하는 현상
- 삽입 이상 : 테이블에 데이터를 삽입할 때 의도와 상관없이 원하지 않는 값들로 인해 삽입할 수 없게 되는 현상
- 삭제 이상 : 테이블에서 한 튜플을 삭제할 때 의도와는 상관없는 값들도 함께 삭제되는, 연쇄 삭제가 발생하는 현상
- 갱신 이상 : 테이블에서 튜플에 있는 속성 값을 갱신할 때 일부 튜플의 정보만 갱신되어 정보에 불일치성이 생기는 현상

## 정규화(Normalization)
: 테이블의 속성들이 상호 종속적인 관계를 갖는 특성을 이용하여 테이블을 무손실 분해하는 과정

1. 제 1정규화 : 모든 속성의 도메인이 원자 값만으로 되어 있는 정규형
2. 제 2정규황 : 기본키가 아닌 모든 속성이 기본키에 대하여 완전 함수적 종속을 만족하는 정규형
3. 제 3정규형 : 기본키가 아닌 모든 속성이 기본키에 대해 이행적 함수적 종속을 만족하지 않는 정규형
4. BCNF : 모든 결정자가 후보키인 정규형
5. 제 4정규형 : 함수적 종속 관계를 만족하는 관계
6. 제 5정규화 : 모든 조인 종속이 후보키를 통해서 성립되는 정규형

```
도 : 도메인이 원자값
부 : 부분적 함수 종속 제거
이 : 이행적 함수 종속 제거
결 : 결정자이면서 후보키가 아닌 것 제거
다 : 다치 종속 제거
조 : 조인 종속성 이용
```

## 반정규화(Denormalization)
: 정규화된 데이터 모델을 의도적으로 통합, 중복, 분리하여 정규화 원칙을 위배하는 행위
  
반정규화의 방법 - 테이블 통합, 테이블 분할, 중복 테이블 추가, 중복 속성 추가
  
#
 
## 시스템 카탈로그
: 다양한 객체에 관한 정보를 포함하는 시스템 데이터베이스
### 메타 데이터
: 시스템 카탈로그에 저장된 정보
### 데이터 디렉터리
: 데이터 사전에 수록된 데이터에 접근하는 데 필요한 정보를 관리 유지하는 시스템
  
#

## 트랜잭션 분석 / CRUD 분석
### 트랜잭션(Transaction)
: 논리적 기능을 수행하기 위한 작업의 단위 또는 한꺼번에 모두 수행되어야 할 일련의 연산  
데이터베이스 시스템에서 병행 제어 및 회복 작업 시 처리되는 작업의 논리적 단위로 사용

```
트랜잭션의 특성
- Atomicity(원자성) : 트랜잭션의 연산은 데이터베이스에 모두 반영되도록  완료하거나 반영되지 않도록 복구되어야 함
- Consistency(일관성) : 트랜잭션이 그 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환함
- Isolation(독립성) : 둘 이상의 트랜잭션이 동시에 병행 실행되는 경우 다른 트랜잭션의 연산이 끼어들 수 없음
- Durability(지속성) : 성공적으로 완료된 트랜잭션의 결과는 시스템이 고장나더라도 영구적으로 반영되어야 함
```

### CRUD 분석
: 프로세스와 테이블 간에 CRUD 매트릭스를 만들어 트랜잭션을 분석하는 것
  
#

## 인덱스
: 데이터 레코드를 빠르게 접근하기 위해 <키 값, 포인터> 쌍으로 구성되는 데이터 구조

### 인덱스의 종류
- 트리 기반 인덱스 : 인덱스를 저장하는 블록들이 트리 구조를 이루고 있는 것
- 비트맵 인덱스 : 인덱스 컬럼의 데이터를 Bit 값인 0 또는 1로 변환하여 인덱스 키로 사용하는 방법
- 함수 기반 인덱스 : 컬럼의 값 대신 컬럼에 특정 함수나 수식을 적용하여 산출된 값을 사용하는 것
- 비트맵 조인 인덱스 : 다수의 조인된 객체로 구성된 인덱스
- 도메인 인덱스 : 개발자가 필요한 인덱스를 직접 만들어 사용하는 것

### 클러스터드/넌클러스터드 인덱스
- 클러스터드 인덱스 : 인덱스 키의 순서에 따라 데이터가 정렬되어 저장되는 방식
- 넌클러스터드 인덱스 : 인덱스의 키 값만 정렬되어 있고 실제 데이터는 정렬되지 않는 방식

## 뷰 / 클러스터
### 뷰(View)
: 하나 이상의 기본 테이블로부터 유도된 가상 테이블

### 뷰의 장·단점
- 장점
    - 논리적 데이터 독립성 제공
    - 사용자의 데이터 관리를 간단하게 해줌
    - 접근 제어를 통한 자동 보안이 제공됨
- 단점
    - 독립적인 인덱스를 가질 수 없음
    - 뷰의 정의를 변경할 수 없음
    - 뷰로 구성된 내용에 대한 삽입, 삭제, 갱신 연산에 제약이 따름

### 클러스터(Cluster)
: 동일한 성격의 데이터를 동일한 테이블 블록에 저장하는 물리적 저장 방법  

## 파티션(Partition)
: 대용량의 테이블이나 인덱스를 작은 논리적 단위의 파티션으로 나누는 것

### 파티션의 장·단점
- 장점
    - 쿼리 성능 향상
    - 디스크 성능 향상
    - 데이터 손상 정도 최소화
    - 데이터 가용성 향상
- 단점
    - 세심한 관리가 요구됨
    - 테이블간 조인에 대한 비용 증가
    - 성능 저하

### 파티션의 종류 
- 범위 분할(Range Partitioning) : 지정한 열의 값을 기준으로 분할함
- 해시 분할(Hash Partitioning) : 해시 함수를 적용한 결과 값에 따라 데이터 분할
- 조합 분할(Composite Partitioning) : 범위 분할로 분할한 다음 해시 함수를 적용하여 다시 분할하는 방식
  
#

## 분산 데이터베이스
: 논리적으로 하나의 시스템에 속하지만 물리적으로는 네트워크를 통해 연결된 여러 개의 사이트에 분산된 데이터베이스

### 분산 데이터베이스의 목표
- 위치 투명성(Location Transparency)
- 중복 투명성(Replication Transparency)
- 병행 투명성(Concurrency Transparency)
- 장애 투명성(Failure Transparency)

## 데이터베이스 이중화(Database Replication)
: 동일한 데이터베이스를 복제하여 관리하는 것

### 데이터베이스 이중화의 분류
- Eager 기법 : 데이터 변경이 발생하면 이중화된 모든 데이터베이스에 변경 내용이 즉시 적용되는 기법
- Lazy 기법 : 트랜잭션의 수행이 종료되면 변경 사실을 새로운 트랜잭션에 작성하여 각 데이터베이스에 전달되는 기법

### 데이터베이스 이중화 구성 방법
- 활동-대기 방법 : 한 DB가 활성 상태로 서비스하고 있으면 다른 DB는 대기하고 있음
- 활동-활동 방법 : 두 개의 DB가 서로 다른 서비스를 제공

### 클러스터링(Clustering)
: 두 대 이상의 서버를 하나의 서버처럼 운영하는 기술
- 고가용성 클러스터링 : 하나의 서버에 장애가 발생하면 다른 서버가 처리하여 서비스 중단을 방지하는 방식
- 병렬 처리 클러스터링 : 하나의 작업을 여러 개의 서버에서 분산하여 처리하는 방식

### RTO/RPO
- RTO(목표 복구 시간) : 업무 중단 시점으로부터 복구되어 가동될 때까지의 소요 시간
- RPO(목표 복구 시점) : 업무 중단 시점으로부터 데이터를 복구할 수 있는 기준점